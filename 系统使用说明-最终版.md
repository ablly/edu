# 🎯 EduPilot系统使用说明 - 最终版

## ✅ 当前系统状态

### 已完成的工作

1. ✅ **数据迁移完成**
   - SQLite → PostgreSQL
   - 290条记录全部迁移成功
   - 备份已保存

2. ✅ **后端服务运行中**
   - Flask API服务器
   - 端口：5000
   - 数据库：PostgreSQL

3. ✅ **前端服务启动中**
   - React管理后台
   - 端口：3000
   - 正在加载...

---

## 🚀 访问系统

### ✅ React管理后台（推荐）

**地址：** http://localhost:3000

**登录信息：**
```
用户名：周启航
密码：  zqh050102
```

**功能特点：**
- ✅ 现代化UI（Ant Design）
- ✅ 用户批量操作（启用/禁用/删除）
- ✅ 高级筛选（会员等级、日期范围）
- ✅ 完整的订单管理
- ✅ 会员管理
- ✅ 支付记录查看
- ✅ 响应式设计

### ❌ Flask HTML后台（已弃用）

**地址：** http://localhost:5000/admin/login

**问题：**
- 样式加载失败（CDN被阻止）
- 功能不完整
- 用户体验差

**建议：** 不要使用，改用React前端

---

## 📊 系统架构

```
┌─────────────────────────────────────────────┐
│          用户访问                             │
└──────────────┬──────────────────────────────┘
               │
               ├──► http://localhost:3000  (React前端)
               │    - 管理后台界面
               │    - 现代化UI
               │    - 完整功能
               │
               └──► http://localhost:5000  (Flask后端)
                    - API服务
                    - 数据处理
                    - 业务逻辑
                    │
                    └──► PostgreSQL (数据库)
                         - 用户数据
                         - 订单记录
                         - 会员信息
```

---

## 🔧 端口使用情况

| 服务 | 端口 | 状态 | 说明 |
|------|------|------|------|
| Flask后端 | 5000 | ✅ 运行中 | API服务器 |
| React前端 | 3000 | 🔄 启动中 | 管理后台 |
| PostgreSQL | 5432 | ✅ 运行中 | 数据库 |

---

## 📝 完整的功能列表

### 用户管理
- ✅ 查看用户列表
- ✅ 批量启用/禁用用户
- ✅ 批量删除用户
- ✅ 高级筛选（会员等级、注册时间）
- ✅ 用户详情查看
- ✅ 重置用户密码
- ✅ 编辑用户信息

### 订单管理
- ✅ 查看所有订单
- ✅ 订单状态筛选
- ✅ 订单详情查看
- ✅ 退款处理
- ✅ 订单备注

### 会员管理
- ✅ 查看会员套餐
- ✅ 会员购买记录
- ✅ 会员到期管理
- ✅ 赠送会员

### 数据统计
- ✅ 用户统计
- ✅ 收入统计
- ✅ 会员统计
- ✅ 增长趋势图表

---

## 🎨 React前端启动说明

### 如果前端窗口已打开

等待启动完成（约30秒-2分钟），然后访问：
**http://localhost:3000**

### 如果需要手动启动

```powershell
# 方法1：使用批处理文件
.\快速启动React前端.bat

# 方法2：手动命令
cd admin-frontend
npm install  # 首次运行需要
npm run dev
```

### 启动成功标志

当看到以下信息时，说明启动成功：

```
  ➜  Local:   http://localhost:3000/
  ➜  Network: use --host to expose
  ➜  press h + enter to show help
```

---

## 🔐 账户信息

### 管理员账户（Admin表）

```
用户名：周启航
密码：  zqh050102
邮箱：  zqh@edupilot.com
权限：  超级管理员
```

### 测试用户（User表）

系统中有7个测试用户，可以用于测试前端功能：
- admin
- test_user
- monthly_user
- zqh
- chq
- zwwqh
- 周启航

---

## 💾 数据库信息

### PostgreSQL连接信息

```
主机：localhost
端口：5432
数据库：edupilot
用户名：postgres
密码：050102
```

### 数据统计

- 管理员：1个
- 用户：7个
- 订单：39个
- 会员：32条记录
- 对话：26个
- 消息：94条

---

## 🛠️ 快速启动脚本

### 启动整个系统

```powershell
# 1. 启动Flask后端（使用PostgreSQL）
.\start_flask_postgresql.bat

# 2. 启动React前端
.\快速启动React前端.bat
```

### 停止系统

```
按 Ctrl+C 停止各个服务
```

---

## ⚠️ 常见问题

### Q1: React前端无法访问？

**解决：**
1. 检查Node.js是否安装：`node --version`
2. 检查前端是否启动成功
3. 查看启动窗口的错误信息
4. 尝试重新运行：`.\快速启动React前端.bat`

### Q2: 登录时提示"用户名或密码错误"？

**解决：**
1. 确认使用的是**周启航**（不是"zqh"）
2. 确认密码是**zqh050102**（全小写）
3. 清除浏览器缓存后重试

### Q3: Flask HTML后台样式错乱？

**解决：**
不要使用Flask HTML后台，改用React前端：http://localhost:3000

### Q4: 想回退到SQLite？

**解决：**
1. 停止Flask服务器
2. 删除或注释环境变量 `DATABASE_URL`
3. 重启Flask：`python app.py`
4. 系统将自动使用SQLite

---

## 📂 重要文件位置

### 配置文件

- `start_flask_postgresql.bat` - Flask启动脚本（PostgreSQL）
- `快速启动React前端.bat` - React前端启动脚本
- `.env` - 环境变量配置（如果创建）

### 数据库

- `database/scores.db` - SQLite数据库（原始）
- `database/scores.db.backup_*` - SQLite备份

### 文档

- `PostgreSQL迁移完成报告.md` - 迁移详情
- `启动React管理后台.md` - React前端说明
- `系统使用说明-最终版.md` - 本文档

---

## 🎉 开始使用

1. **等待React前端启动完成**（约1-2分钟）

2. **打开浏览器访问：** http://localhost:3000

3. **登录系统：**
   - 用户名：周启航
   - 密码：zqh050102

4. **开始管理：**
   - 查看用户列表
   - 管理订单
   - 查看会员
   - 使用批量操作

---

## 📞 技术支持

### 系统状态检查

```powershell
# 检查Flask后端
curl http://localhost:5000/api/health

# 检查React前端
curl http://localhost:3000

# 检查PostgreSQL
psql -U postgres -d edupilot -c "SELECT COUNT(*) FROM users;"
```

### 日志文件

- Flask日志：`logs/app.log`
- Flask错误：`logs/error.log`

---

**最后更新：** 2025-10-13

**状态：** ✅ 系统就绪，React前端启动中



