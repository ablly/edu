# ç®¡ç†å‘˜è´¦æˆ·è¯´æ˜æ–‡æ¡£

**é¡¹ç›®åç§°**: EduPilot AIæ•™è‚²åæ§ç³»ç»Ÿ  
**æ›´æ–°æ—¶é—´**: 2025-10-10  
**çŠ¶æ€**: âœ… å·²é…ç½®

---

## ğŸ‘¥ ç®¡ç†å‘˜è´¦æˆ·åˆ—è¡¨

### 1ï¸âƒ£ è¶…çº§ç®¡ç†å‘˜

```
ğŸ“ è´¦æˆ·ä¿¡æ¯ï¼š
  â€¢ ç”¨æˆ·å: zqh
  â€¢ å¯†ç : Zqh050102@
  â€¢ é‚®ç®±: 3533912007@qq.com
  â€¢ è§’è‰²: super_adminï¼ˆè¶…çº§ç®¡ç†å‘˜ï¼‰
  â€¢ çŠ¶æ€: æ¿€æ´»

ğŸ”‘ æƒé™ï¼šå…¨éƒ¨15é¡¹æƒé™
```

**æ‹¥æœ‰çš„æƒé™**ï¼š

| åˆ†ç±» | æƒé™ | è¯´æ˜ |
|------|------|------|
| ç”¨æˆ·ç®¡ç† | âœ… user_view | æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ· |
| | âœ… user_edit | ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ |
| | âœ… user_delete | åˆ é™¤ç”¨æˆ· |
| | âœ… user_disable | ç¦ç”¨/å¯ç”¨ç”¨æˆ· |
| ä¼šå‘˜ç®¡ç† | âœ… membership_view | æŸ¥çœ‹ä¼šå‘˜ä¿¡æ¯ |
| | âœ… membership_edit | ç¼–è¾‘ä¼šå‘˜å¥—é¤ |
| | âœ… membership_create | æ‰‹åŠ¨å¼€é€šä¼šå‘˜ |
| è®¢å•ç®¡ç† | âœ… order_view | æŸ¥çœ‹è®¢å• |
| | âœ… order_edit | ç¼–è¾‘è®¢å• |
| | âœ… order_refund | å¤„ç†é€€æ¬¾ |
| ç»Ÿè®¡åŠŸèƒ½ | âœ… stats_view | æŸ¥çœ‹ç»Ÿè®¡æ•°æ® |
| | âœ… stats_export | å¯¼å‡ºæ•°æ® |
| ç³»ç»Ÿç®¡ç† | âœ… system_config | ç³»ç»Ÿé…ç½® |
| | âœ… admin_manage | ç®¡ç†å‘˜ç®¡ç† |

**ä½¿ç”¨è¯´æ˜**ï¼š
- âœ… å¯ä»¥æ‰§è¡Œæ‰€æœ‰æ“ä½œ
- âœ… å¯ä»¥ç®¡ç†å…¶ä»–ç®¡ç†å‘˜
- âœ… å¯ä»¥ä¿®æ”¹ç³»ç»Ÿé…ç½®
- âš ï¸ è¯·å¦¥å–„ä¿ç®¡è´¦å·å¯†ç 

---

### 2ï¸âƒ£ åªè¯»ç®¡ç†å‘˜

```
ğŸ“ è´¦æˆ·ä¿¡æ¯ï¼š
  â€¢ ç”¨æˆ·å: readonly
  â€¢ å¯†ç : Readonly@123
  â€¢ é‚®ç®±: readonly@edupilot.com
  â€¢ è§’è‰²: readonlyï¼ˆåªè¯»ç®¡ç†å‘˜ï¼‰
  â€¢ çŠ¶æ€: æ¿€æ´»

ğŸ”‘ æƒé™ï¼šä»…æŸ¥çœ‹æƒé™ï¼ˆ4é¡¹ï¼‰
```

**æ‹¥æœ‰çš„æƒé™**ï¼š

| åˆ†ç±» | æƒé™ | è¯´æ˜ |
|------|------|------|
| ç”¨æˆ·ç®¡ç† | âœ… user_view | ä»…æŸ¥çœ‹ç”¨æˆ· |
| ä¼šå‘˜ç®¡ç† | âœ… membership_view | ä»…æŸ¥çœ‹ä¼šå‘˜ |
| è®¢å•ç®¡ç† | âœ… order_view | ä»…æŸ¥çœ‹è®¢å• |
| ç»Ÿè®¡åŠŸèƒ½ | âœ… stats_view | ä»…æŸ¥çœ‹ç»Ÿè®¡ |

**æ— æƒé™æ“ä½œ**ï¼š

| æ“ä½œç±»å‹ | çŠ¶æ€ |
|---------|------|
| ç¼–è¾‘ç”¨æˆ· | âŒ æ— æƒé™ |
| åˆ é™¤ç”¨æˆ· | âŒ æ— æƒé™ |
| ç¦ç”¨ç”¨æˆ· | âŒ æ— æƒé™ |
| ç¼–è¾‘ä¼šå‘˜ | âŒ æ— æƒé™ |
| å¼€é€šä¼šå‘˜ | âŒ æ— æƒé™ |
| ç¼–è¾‘è®¢å• | âŒ æ— æƒé™ |
| é€€æ¬¾å¤„ç† | âŒ æ— æƒé™ |
| å¯¼å‡ºæ•°æ® | âŒ æ— æƒé™ |
| ç³»ç»Ÿé…ç½® | âŒ æ— æƒé™ |
| ç®¡ç†å‘˜ç®¡ç† | âŒ æ— æƒé™ |

**ä½¿ç”¨è¯´æ˜**ï¼š
- âœ… ä»…å¯æŸ¥çœ‹æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹
- âœ… é€‚åˆæ•°æ®åˆ†æã€ç›‘æ§äººå‘˜
- âš ï¸ å°è¯•æ‰§è¡Œæ— æƒé™æ“ä½œä¼šè¢«æ‹’ç»ï¼ˆ403é”™è¯¯ï¼‰

---

## ğŸ”’ æƒé™å¯¹æ¯”è¡¨

| åŠŸèƒ½ | è¶…çº§ç®¡ç†å‘˜ | åªè¯»ç®¡ç†å‘˜ |
|------|-----------|-----------|
| æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨ | âœ… | âœ… |
| æœç´¢ç”¨æˆ· | âœ… | âœ… |
| æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ… | âœ… | âœ… |
| ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ | âœ… | âŒ |
| åˆ é™¤ç”¨æˆ· | âœ… | âŒ |
| ç¦ç”¨/å¯ç”¨ç”¨æˆ· | âœ… | âŒ |
| é‡ç½®ç”¨æˆ·å¯†ç  | âœ… | âŒ |
| | | |
| æŸ¥çœ‹ä¼šå‘˜åˆ—è¡¨ | âœ… | âœ… |
| æŸ¥çœ‹ä¼šå‘˜è¯¦æƒ… | âœ… | âœ… |
| æ‰‹åŠ¨å¼€é€šä¼šå‘˜ | âœ… | âŒ |
| å»¶é•¿ä¼šå‘˜æœŸé™ | âœ… | âŒ |
| ä¿®æ”¹ä¼šå‘˜å¥—é¤ | âœ… | âŒ |
| | | |
| æŸ¥çœ‹è®¢å•åˆ—è¡¨ | âœ… | âœ… |
| æŸ¥çœ‹è®¢å•è¯¦æƒ… | âœ… | âœ… |
| ç­›é€‰è®¢å• | âœ… | âœ… |
| å¤„ç†é€€æ¬¾ | âœ… | âŒ |
| ä¿®æ”¹è®¢å•çŠ¶æ€ | âœ… | âŒ |
| | | |
| æŸ¥çœ‹ç»Ÿè®¡æ•°æ® | âœ… | âœ… |
| æŸ¥çœ‹å›¾è¡¨ | âœ… | âœ… |
| å¯¼å‡ºæ•°æ® | âœ… | âŒ |
| | | |
| ç³»ç»Ÿé…ç½® | âœ… | âŒ |
| ç®¡ç†å…¶ä»–ç®¡ç†å‘˜ | âœ… | âŒ |
| æŸ¥çœ‹æ“ä½œæ—¥å¿— | âœ… | âœ… |

---

## ğŸŒ ç™»å½•æ–¹å¼

### è®¿é—®åœ°å€
```
http://localhost:5000/admin/login
```

### è¶…çº§ç®¡ç†å‘˜ç™»å½•
1. è®¿é—®ç®¡ç†åå°ç™»å½•é¡µé¢
2. è¾“å…¥ç”¨æˆ·åï¼š`zqh`
3. è¾“å…¥å¯†ç ï¼š`Zqh050102@`
4. ç‚¹å‡»ç™»å½•

### åªè¯»ç®¡ç†å‘˜ç™»å½•
1. è®¿é—®ç®¡ç†åå°ç™»å½•é¡µé¢
2. è¾“å…¥ç”¨æˆ·åï¼š`readonly`
3. è¾“å…¥å¯†ç ï¼š`Readonly@123`
4. ç‚¹å‡»ç™»å½•

---

## ğŸ” å®‰å…¨å»ºè®®

### 1. å¯†ç å®‰å…¨
- âœ… è¶…çº§ç®¡ç†å‘˜å¯†ç å·²è®¾ç½®ä¸ºå¼ºå¯†ç 
- âš ï¸ å»ºè®®åªè¯»ç®¡ç†å‘˜é¦–æ¬¡ç™»å½•åä¿®æ”¹å¯†ç 
- ğŸ”„ å»ºè®®å®šæœŸæ›´æ¢å¯†ç ï¼ˆ30-90å¤©ï¼‰

### 2. è´¦å·ç®¡ç†
- ğŸ“ è®°å½•æ‰€æœ‰ç®¡ç†å‘˜æ“ä½œï¼ˆå·²å®ç°æ—¥å¿—åŠŸèƒ½ï¼‰
- ğŸš« ä¸è¦å…±äº«ç®¡ç†å‘˜è´¦å·
- â° è®¾ç½®ä¼šè¯è¶…æ—¶ï¼ˆå»ºè®®30åˆ†é’Ÿï¼‰

### 3. è®¿é—®æ§åˆ¶
- ğŸŒ å»ºè®®é…ç½®IPç™½åå•ï¼ˆå¯é€‰ï¼‰
- ğŸ”’ å¯ç”¨ä¸¤æ­¥éªŒè¯ï¼ˆå¯é€‰ï¼Œåç»­å®ç°ï¼‰
- ğŸ“± ç»‘å®šæ‰‹æœºå·ç ï¼ˆå¯é€‰ï¼Œåç»­å®ç°ï¼‰

---

## ğŸ“Š æƒé™éªŒè¯æœºåˆ¶

### åç«¯æƒé™æ£€æŸ¥

```python
from models_admin import AdminPermission

# æ£€æŸ¥ç”¨æˆ·æŸ¥çœ‹æƒé™
@admin_required(AdminPermission.USER_VIEW)
def view_users():
    # æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨
    pass

# æ£€æŸ¥ç”¨æˆ·ç¼–è¾‘æƒé™
@admin_required(AdminPermission.USER_EDIT)
def edit_user(user_id):
    # ç¼–è¾‘ç”¨æˆ·
    pass
```

### æƒé™æ£€æŸ¥æµç¨‹

1. **ç™»å½•éªŒè¯**
   - æ£€æŸ¥ç®¡ç†å‘˜è´¦å·å’Œå¯†ç 
   - éªŒè¯è´¦æˆ·æ˜¯å¦æ¿€æ´»
   - è®°å½•ç™»å½•ä¿¡æ¯

2. **æƒé™éªŒè¯**
   - æ£€æŸ¥æ˜¯å¦æ˜¯è¶…çº§ç®¡ç†å‘˜ï¼ˆè‡ªåŠ¨é€šè¿‡ï¼‰
   - æ£€æŸ¥æƒé™åˆ—è¡¨æ˜¯å¦åŒ…å«æ‰€éœ€æƒé™
   - è¿”å›403é”™è¯¯ï¼ˆå¦‚æœæ— æƒé™ï¼‰

3. **æ“ä½œè®°å½•**
   - è®°å½•æ‰€æœ‰ç®¡ç†å‘˜æ“ä½œ
   - åŒ…å«æ“ä½œè€…ã€æ—¶é—´ã€IPã€ç›®æ ‡
   - æ”¯æŒå®¡è®¡å’Œè¿½æº¯

---

## ğŸ“ æ“ä½œæ—¥å¿—

æ‰€æœ‰ç®¡ç†å‘˜çš„æ“ä½œéƒ½ä¼šè¢«è®°å½•åˆ° `admin_logs` è¡¨ä¸­ï¼š

### è®°å½•å†…å®¹
- æ“ä½œè€…ï¼šç®¡ç†å‘˜IDå’Œç”¨æˆ·å
- æ“ä½œæ—¶é—´ï¼šç²¾ç¡®åˆ°ç§’
- æ“ä½œç±»å‹ï¼šç™»å½•ã€æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤ç­‰
- æ“ä½œå¯¹è±¡ï¼šç”¨æˆ·ã€è®¢å•ã€ä¼šå‘˜ç­‰
- IPåœ°å€ï¼šæ¥æºIP
- æ“ä½œç»“æœï¼šæˆåŠŸæˆ–å¤±è´¥
- é”™è¯¯ä¿¡æ¯ï¼šå¤±è´¥åŸå› ï¼ˆå¦‚æœ‰ï¼‰

### æŸ¥è¯¢æ—¥å¿—
```python
# æŸ¥è¯¢æŸä¸ªç®¡ç†å‘˜çš„æ‰€æœ‰æ“ä½œ
logs = AdminLog.query.filter_by(admin_id=1).all()

# æŸ¥è¯¢æœ€è¿‘çš„æ“ä½œ
recent_logs = AdminLog.query.order_by(
    AdminLog.created_at.desc()
).limit(100).all()

# æŸ¥è¯¢å¤±è´¥çš„æ“ä½œ
failed_logs = AdminLog.query.filter_by(
    status='failure'
).all()
```

---

## ğŸ› ï¸ ç®¡ç†å‘˜ç®¡ç†

### æ·»åŠ æ–°ç®¡ç†å‘˜

```python
from models_admin import Admin, AdminPermission
import json

# åˆ›å»ºæ–°ç®¡ç†å‘˜
new_admin = Admin(
    username='newadmin',
    email='newadmin@example.com',
    real_name='æ–°ç®¡ç†å‘˜',
    role='admin',
    is_super_admin=False,
    is_active=True,
    permissions=json.dumps([
        AdminPermission.USER_VIEW,
        AdminPermission.ORDER_VIEW
    ])
)
new_admin.set_password('StrongPassword123!')
db.session.add(new_admin)
db.session.commit()
```

### ä¿®æ”¹ç®¡ç†å‘˜æƒé™

```python
admin = Admin.query.filter_by(username='readonly').first()

# æ·»åŠ å¯¼å‡ºæƒé™
import json
current_perms = json.loads(admin.permissions)
current_perms.append(AdminPermission.STATS_EXPORT)
admin.permissions = json.dumps(current_perms)
db.session.commit()
```

### ç¦ç”¨ç®¡ç†å‘˜

```python
admin = Admin.query.filter_by(username='readonly').first()
admin.is_active = False
db.session.commit()
```

---

## ğŸ”„ å¯†ç ä¿®æ”¹

### ä¿®æ”¹è‡ªå·±çš„å¯†ç 

```python
from models_admin import Admin

admin = Admin.query.filter_by(username='readonly').first()
admin.set_password('NewStrongPassword456!')
db.session.commit()
```

### é‡ç½®ä»–äººå¯†ç ï¼ˆä»…è¶…çº§ç®¡ç†å‘˜ï¼‰

```python
# åªæœ‰è¶…çº§ç®¡ç†å‘˜å¯ä»¥é‡ç½®å…¶ä»–ç®¡ç†å‘˜çš„å¯†ç 
target_admin = Admin.query.filter_by(username='readonly').first()
target_admin.set_password('ResetPassword789!')
db.session.commit()

# è®°å½•æ“ä½œæ—¥å¿—
log_admin_action(
    action='reset_password',
    module='admin',
    description=f'é‡ç½®ç®¡ç†å‘˜ {target_admin.username} çš„å¯†ç ',
    target_type='admin',
    target_id=target_admin.id
)
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ•°æ®åº“è¡¨

**adminsè¡¨**ï¼šå­˜å‚¨ç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯
```sql
SELECT * FROM admins;
```

**admin_logsè¡¨**ï¼šå­˜å‚¨æ“ä½œæ—¥å¿—
```sql
SELECT * FROM admin_logs ORDER BY created_at DESC LIMIT 100;
```

### æŸ¥è¯¢ç®¡ç†å‘˜

```python
# æŸ¥è¯¢æ‰€æœ‰ç®¡ç†å‘˜
from models_admin import Admin
admins = Admin.query.all()

# æŸ¥è¯¢è¶…çº§ç®¡ç†å‘˜
super_admins = Admin.query.filter_by(is_super_admin=True).all()

# æŸ¥è¯¢æ¿€æ´»çš„ç®¡ç†å‘˜
active_admins = Admin.query.filter_by(is_active=True).all()
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è¶…çº§ç®¡ç†å‘˜æƒé™**
   - æ‹¥æœ‰æœ€é«˜æƒé™ï¼Œè¯·è°¨æ…æ“ä½œ
   - å»ºè®®åªåœ¨å¿…è¦æ—¶ä½¿ç”¨
   - ä¸è¦åˆ é™¤è‡ªå·±çš„è´¦æˆ·

2. **åªè¯»ç®¡ç†å‘˜é™åˆ¶**
   - ä»…ç”¨äºæ•°æ®æŸ¥çœ‹å’Œç›‘æ§
   - ä¸èƒ½ä¿®æ”¹ä»»ä½•æ•°æ®
   - é€‚åˆä¸´æ—¶è®¿é—®æˆ–å®¡è®¡

3. **è´¦æˆ·å®‰å…¨**
   - å®šæœŸæ£€æŸ¥ç®¡ç†å‘˜è´¦æˆ·
   - åŠæ—¶ç¦ç”¨ä¸å†ä½¿ç”¨çš„è´¦æˆ·
   - å®šæœŸå®¡æŸ¥æ“ä½œæ—¥å¿—

4. **å¯†ç ç­–ç•¥**
   - ä½¿ç”¨å¼ºå¯†ç ï¼ˆè‡³å°‘12ä½ï¼ŒåŒ…å«å¤§å°å†™ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ï¼‰
   - ä¸è¦ä½¿ç”¨å¸¸è§å¯†ç 
   - å®šæœŸæ›´æ¢å¯†ç 

---

<div align="center">

**âœ¨ ç®¡ç†å‘˜è´¦æˆ·å·²é…ç½®å®Œæˆ**

å¦‚éœ€ä¿®æ”¹æƒé™æˆ–æ·»åŠ æ–°ç®¡ç†å‘˜ï¼Œè¯·è”ç³»è¶…çº§ç®¡ç†å‘˜

Made with ğŸ” by EduPilot Team

</div>








